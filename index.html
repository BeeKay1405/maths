<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Our Mathâ€‘Heart</title>
  <link rel="stylesheet" href="style.css"/>
  <!-- PyScript CSS & runtime -->
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <!-- PyScript config: load packages -->
  <py-config>
    <packages>
      numpy
      matplotlib
    </packages>
  </py-config>
</head>
<body>
  <h1>Unlock Our Love Equation</h1>

  <!-- Question area -->
  <div id="question">Q1: [Your romantic prompt here]</div>
  <input id="answer" type="text" placeholder="Type your answer"/>
  <button id="submit">Submit</button>

  <!-- Plotting area -->
  <div id="plot-area"></div>

  <!-- Python logic via PyScript -->
  <py-script>
    import js
    from js import document
    import matplotlib.pyplot as plt
    import numpy as np
    from pyscript import display

    # Placeholder answers & prompts
    answers = ["(x^2 + y^2 - 1)", "3", "- x2y3"]
    prompts = [
      "Q1: â€¦answer is (xÂ²+yÂ²â€“1)â€¦",
      "Q2: â€¦answer is 3â€¦",
      "Q3: â€¦answer is - x2y3â€¦",
    ]
    stage = 0

    def draw_stage(n):
        plt.clf()
        if n < 3:
            plt.text(0.5, 0.5, f"Stage {n}: {answers[n-1]}", ha='center', va='center', size=20)
        else:
            # Final heart-curve
            x = np.linspace(-2,2,400)
            y = np.linspace(-2,2,400)
            X, Y = np.meshgrid(x,y)
            Z = (X**2+Y**2-1)**3 - X**2*Y**3
            plt.contour(X, Y, Z, levels=[0])
        display(plt.gcf(), target="plot-area")

    def on_submit(evt):
        global stage
        user = document.getElementById("answer").value.strip()
        if user == answers[stage]:
            stage += 1
            document.getElementById("answer").value = ""
            if stage < len(answers):
                document.getElementById("question").innerHTML = prompts[stage]
                draw_stage(stage)
            else:
                document.getElementById("question").innerHTML = "ðŸ’– Love Unlocked! ðŸ’–"
                draw_stage(stage)
        else:
            document.getElementById("question").innerHTML = "Try again! " + prompts[stage]

    document.getElementById("submit").addEventListener("click", on_submit)
  </py-script>
</body>
</html>